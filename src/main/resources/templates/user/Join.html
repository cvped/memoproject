<!DOCTYPE html>
<html lang="ko"
 		xmlns:th="http://www.thymeleaf.org" 
 		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
 		layout:decorate="~{Layout/default}">
	
	
		<section layout:fragments="contents" class="contents d-flex justify-content-center">
			<div class="input-box my-5 p-5 rounded-lg">
				<h1 class="text-center">회원가입</h1>
				<input type="text" class="form-center mt-4" id="idInput" placeholder="아이디를입력하세요">
				<input type="password" class="form-center mt-2" id="passwordInput" placeholder="비밀번호를 입력하세요">
				<input type="password" class="form-center mt-2" id="passwordConfirmInput" placeholder="비밀번호 확인해주세요">
				<input type="text" class="form-center mt-2" id="nameInput" placeholder="이름을 입력하세요">
				<input type="text" class="form-center mt-2" id="emailInput" placeholder="이메일을 입력하세요">
				<button type="button" class="btn btn-secondary btn block mt-3" id="joinbtn">가입하기</button>
				<a href="/user/join-view"></a>
			</div>
		</section>
		
		<script layout:fragment="script">
		$(document).ready(function(){
				$("#joinbtn").on("click",function(){
					let id = $("#idInput").val();
					let password = $("passwordInput").val();
					let passwordConfirm = $("passwordConfirm").val();
					let name = $("nameInput").val();
					let email = $("emailInput").val();
					
					if(id == ""){
						alert("아이디를 입력하세요");
						return ;
					}
					if(password == ""){
						alert("비밀번호를 입력하세요");
						return ;
					}
					
					if(password != passwordConfirm){
						alert("비밀번호가 일치하지 않습니다");
						return ;
					}
					
					if(name == ""){
						alert("이름을 입력하세요");
						return;
					}
					
					if(email == ""){
						alert("이메일을 입력하세요");
						return;
					}
					
					$.ajax({
						type:"post"
						,url:"/user/join"
						,data:{"loginId" : id, "password":password,"name":name,"email":email}
						,succres:function(response){
							if(response.result == "success"){
								location.href="/user/login-view"
							}else{
								alert("회원가입 실패!!")
							}
							
						}
						,error:function(){
							alert("회원가입 에러!!")
						}
						
					});
					
				});
			});
		
		</script>
</html>